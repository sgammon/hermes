<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>platform Package &mdash; Hermes v2.0 Docs</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5-alpha-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Hermes v2.0 Docs"
          href="_static/opensearch.xml"/>
    <link rel="top" title="Hermes v2.0 Docs" href="index.html" />
    <link rel="up" title="api Package" href="api.html" />
    <link rel="next" title="ampush Package" href="api.platform.ampush.html" />
    <link rel="prev" title="tracker Package" href="api.models.tracker.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.platform.ampush.html" title="ampush Package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="api.models.tracker.html" title="tracker Package"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Hermes</a> &raquo;</li>
          <li><a href="api.html" accesskey="U">api Package</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="platform-package">
<h1>platform Package<a class="headerlink" href="#platform-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2><a class="reference external" href="http://docs.python.org/2.7/library/platform.html#platform" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">platform</span></tt></a> Package<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-api.platform"></span><p>API: Platforms</p>
<p>This package contains platform classes. AppTools platform classes contain
business logic code that must be distributed to all base classes in an app.
Platforms are registered at <cite>apptools.system.platform</cite>, and are picked up
and injected at class construction time, such that platform functionality
is ready and waiting when <cite>self</cite> is defined at runtime.</p>
<p>Platforms can export a number of methods and properties that let them hook
into core app functionality:</p>
<blockquote>
<div><dl class="docutils">
<dt>&#8211; [classmethod] <a href="#id2"><span class="problematic" id="id3">`</span></a>check_environment`(cls, &lt;environ&gt;, &lt;config&gt;)</dt>
<dd><p class="first">Executed by apptools internals before injection and after import,
to delegate environment compatibility detection to the Platform.
Must return True or False to indicate whether this platform should
be loaded.</p>
<p>Example:</p>
<blockquote class="last">
<div><p>&#64;classmethod
def check_environment(cls, environ, config):</p>
<blockquote>
<div><p>&#8220;&#8221;&#8221; Check for some import that this platform depends on. &#8220;&#8221;&#8220;</p>
<dl class="docutils">
<dt>try:</dt>
<dd>import cool_package</dd>
<dt>except ImportError as e:</dt>
<dd>return False</dd>
</dl>
<p>return True</p>
</div></blockquote>
</div></blockquote>
</dd>
</dl>
<p class="attribution">&mdash;[property] <cite>shortcut_exports</cite>
Accessed by apptools internals. Must be a structure in the format
<cite>list([tuple(&lt;string&gt;, &lt;obj&gt;)])</cite>. Shortcuts exported in this way
will appear on injected base classes as directly attached at the
top-level of the object&#8217;s dict. For example:</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div><p>Example:</p>
<blockquote>
<div><p>&#64;property
def shortcut_exports(self):</p>
<blockquote>
<div><p>&#8220;&#8221;&#8221; Return exported base class shortcuts. &#8220;&#8221;&#8220;</p>
<p>return [(&#8216;api&#8217;, self.api), (&#8216;my_cool_platform&#8217;, self)]</p>
</div></blockquote>
</div></blockquote>
<p class="attribution">&mdash;and then, many microseconds later in a handler far, far away &#8212;</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div><p>class MyHandler(WebHandler):</p>
<blockquote>
<div><p>&#8220;&#8221;&#8221; My cool injected handler. &#8220;&#8221;&#8220;</p>
<p>def get(self):</p>
<blockquote>
<div><p>&#8220;&#8221;&#8221; HTTP GET &#8220;&#8221;&#8220;</p>
<p>self.api == MyPlatform.api</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<p class="attribution">&mdash;[property] <cite>template_context</cite>
Loaded by the AppTools output API to allow a Platform to inject data
into the global Jinja2 template context. This is evaluated at runtime
during the request processing flow, and thus has access to request
environment data. Must return a closure to be executed during render,
that accepts the parameters &lt;handler&gt; (the current handler) and
&lt;context&gt; (the current Jinja2 context), the latter of which MUST be
mutated in place and passed back.</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div><p>Example:</p>
<blockquote>
<div><p>&#64;property
def template_context(self):</p>
<blockquote>
<div><p>&#8220;&#8221;&#8221; Return some local data that we have. &#8220;&#8221;&#8220;</p>
<p>def inject_stuff(handler, context):</p>
<blockquote>
<div><p>&#8220;&#8221;&#8221; Inject <cite>mycoolvar</cite> into the Jinja2 template context. &#8220;&#8221;&#8220;</p>
<p>context[&#8216;mycoolvar&#8217;] = &#8216;wassup template!&#8217;
return context</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
<p class="attribution">&mdash;and then, many microseconds later in a template far, far away &#8212;</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div><dl class="docutils">
<dt>{% block injected %}</dt>
<dd>{{ mycoolvar }}</dd>
</dl>
<p>{% endblock injected %}</p>
</div></blockquote>
</div></blockquote>
<p class="attribution">&mdash;[property] <cite>config_shortcuts</cite>
Loaded and attached by the apptools internals to base classes in a very
similar way to <cite>shortcut_exports</cite>. This structure, however, accepts
a list of the form <cite>list(tuple(&lt;string&gt;, &lt;obj&gt;))</cite>, where &lt;string&gt; is a
path to config. The resulting object is wrapped in a Webapp2 cached
property and attached as a config shortcut.</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div>Mostly for internal use.</div></blockquote>
<p class="attribution">&mdash;[method] <a href="#id4"><span class="problematic" id="id5">`</span></a>pre_dispatch`(self, handler)
Hook method that, if defined, is executed right before handler dispatch.
The request flow can be stopped by raising an exception, but the return
value of this function is ignored, so it&#8217;s mostly for initialization.</p>
</div></blockquote>
<blockquote>
<div><dl class="docutils">
<dt>&#8211; [method] <a href="#id6"><span class="problematic" id="id7">`</span></a>post_dispatch`(self, handler, response)</dt>
<dd>Hook method that, if defined, is executed right after the response is
returned from the handler. Once again, the request flow can be stopped
via exceptions but the return value is ignored.</dd>
</dl>
</div></blockquote>
<p>-sam (&lt;<a class="reference external" href="mailto:sam&#46;gammon&#37;&#52;&#48;ampush&#46;com">sam<span>&#46;</span>gammon<span>&#64;</span>ampush<span>&#46;</span>com</a>&gt;)</p>
</div>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.platform.ampush.html">ampush Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.platform.ampush.html#id1"><tt class="docutils literal"><span class="pre">ampush</span></tt> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.platform.ampush.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.platform.ampush.hermes.html">hermes Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api.platform.ampush.hermes.html#id1"><tt class="docutils literal"><span class="pre">hermes</span></tt> Package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api.platform.ampush.tracker.html">tracker Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api.platform.ampush.tracker.html#id1"><tt class="docutils literal"><span class="pre">tracker</span></tt> Package</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/ampush-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">platform Package</a><ul>
<li><a class="reference internal" href="#id1"><tt class="docutils literal"><span class="pre">platform</span></tt> Package</a></li>
<li><a class="reference internal" href="#subpackages">Subpackages</a><ul>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="api.models.tracker.html"
                        title="previous chapter">tracker Package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="api.platform.ampush.html"
                        title="next chapter">ampush Package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/api.platform.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.platform.ampush.html" title="ampush Package"
             >next</a> |</li>
        <li class="right" >
          <a href="api.models.tracker.html" title="tracker Package"
             >previous</a> |</li>
        <li><a href="index.html">Hermes</a> &raquo;</li>
          <li><a href="api.html" >api Package</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ampush.
    </div>
  </body>
</html>